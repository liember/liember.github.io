var _tmr=_tmr||[];
(function(){function x(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function B(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)}function $(a){for(var b="",c,e=0;e<a;e++)c=16*Math.random()|0,b+=c.toString(16);return b}function r(){return(new Date).getTime()}function R(a){return(a=aa.cookie.match(RegExp("(?:^|; )"+a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(a[1]):null}
function E(a,b,c){c=c||{};var e=c.expires;"number"===typeof c.expires&&(e=new Date,e.setTime(e.getTime()+c.expires));e&&e.toUTCString&&(e=e.toUTCString());c.expires=e;a=a+"="+encodeURIComponent(b);for(var d in c)if((b=c[d])||0===b)a+="; "+d,!0!==b&&(a+="="+b);aa.cookie=a}function ta(){var a="tmr"+(""+Math.random()).slice(2);try{return y=window.localStorage||null,y.setItem(a,a),y.removeItem(a),!0}catch(b){return y=null,!1}}function ua(){if(!F)return null;for(var a=location.hostname.split(".").reverse(),
b,c=1,e=a.length;c<e;c++){b=a[0];for(var d=1;d<=c;d++)b=a[d]+"."+b;var f=r(),d="tmr_tcdhn"+f,g=""+f,f={domain:b,path:"/"};try{E(d,g,f);if(R(d)===g)return b;f=f||{};f.expires=-1;E(d,"",f)}catch(k){h&&console.log("Error while test cookie for",b,k)}}return null}function G(a,b){F&&E(a,b,va);if(S)try{y.setItem(a,b)}catch(c){}}function T(a){var b;if(!(b=F?R(a):null)){var c;if(S)a:{try{c=y.getItem(a);break a}catch(e){}c=null}else c=null;b=c}return b}function ba(a){var b=";e="+escape("detect");p(q(a,!0,!1,
!1)+b)}function g(){}function H(a){a&&"object"===typeof a&&(!v&&"id"in a)&&(v=a.id)}function wa(a){return(a=!w?void 0:w[a])&&U?a-U:void 0}function ca(){if(w){for(var a=0,b="domInteractive domContentLoadedEventStart domContentLoadedEventEnd domComplete loadEventStart loadEventEnd".split(" "),c=0;c<b.length;c++){var e=!w?void 0:w[b[c]];if(0<e&&(e<a||0==a))a=e}return a?a:void 0}}function p(a){var b="https://top-fwz1.mail.ru"+a;"function"===typeof navigator.sendBeacon&&!0===navigator.sendBeacon(b)||(a=
new Image,a.src=b)}function I(a,b,c){if(!(b&&"object"===typeof b))return h&&console.warn("[TopMailRu]: Invalid event of "+a),null;var e={name:a,title:c.title||null};"id"in c&&!1!==c.id&&(e.id="id"in b&&b.id,!0!==c.id&&(e.id=e.id||c.id));if(h){var d=da(b,{params:c.required,fn:c.fn});if(d.missed.length)return console.warn("[TopMailRu]"+(e.id?"["+e.id+"]":"")+": Unspecified "+(1<d.missed.length&&d.missed.slice(0,-1).join(", ")+" and "||"")+d.missed.slice(-1)+" in "+a),null;var f=da(b,{params:c.optional,
fn:c.fn}),g=[].concat(d.values).concat(f.values),d=[].concat(d.missed).concat(f.missed);c.value&&(b="value"in b&&b.value,!0!==c.value&&(b=b||c.value),b?g.push("value: "+b):d.push("value"));e.value=g.length?"{ "+g.join(", ")+" }":"";e.empty=d.length?"("+(1<d.length?d.slice(0,-1).join(", ")+" and "+d.slice(-1)+" are":d.slice(-1)+" is")+" empty)":""}return"id"in c&&!1!==c.id&&!e.id?(h&&console.warn("[TopMailRu]: Undefined counter ID of "+a+" "+e.value),null):e}function da(a,b){var c=[],e=[],d,f,g;if(b.params)for(d in b.params)if(b.params.hasOwnProperty(d)&&
!1!==b.params[d])if(f=d in a&&a[d],!0!==b.params[d]&&(f=f||b.params[d]),f)try{g=b.fn?b.fn:null,c.push(d+': "'+(g?g(d,f):f)+'"')}catch(k){}else e&&e.push(d);return{values:c,missed:e}}function J(a){console.info("[TopMailRu]["+a.id+"]: "+(a.title||a.name)+" "+a.value+" "+a.empty)}function q(a,b,c,e){G(V,++z);var d="id"in a?a.id:v,f="url"in a?a.url:location.href,g="referrer"in a?a.referrer:document.referrer,k="title"in a?a.title:document.title,h;h=W;null===h&&(h=xa());h=null!==h?h?1:0:null;var m="userid"in
a?a.userid:u||0===u?u:void 0,l;l=[];v&&d!==v&&l.push("sec");l=l.join(",");var p=window.screen,n;n=(new Date).getTimezoneOffset();var q="";if(window.Intl)try{q=Intl.DateTimeFormat().resolvedOptions().timeZone||""}catch(t){}n=n+"/"+q;a.start=ca();b=(b?"/tracker":"/counter")+"?js=13"+(d?";id="+escape(d):"")+(f?";u="+escape(f):"")+(g?";r="+escape(g):"")+(a.start?";st="+escape(a.start):"")+("gender"in a?";gender="+escape(a.gender):"")+("age"in a?";age="+escape(a.age):"")+("pid"in a?";pid="+escape(a.pid):
"")+(void 0!==m?";userid="+escape(m):"")+(e&&k?";title="+encodeURIComponent(k):"")+(p?";s="+p.width+"*"+p.height:"")+";vp=";d=e=0;document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(e=document.documentElement.clientWidth,d=document.documentElement.clientHeight):"number"==typeof window.innerWidth&&(e=window.innerWidth,d=window.innerHeight);b=b+(""+e+"*"+d)+";touch="+ya+";hds="+za+";flash="+X+";sid="+ea+";ver="+fa+";tz="+encodeURIComponent(n);if(c){if(!w||
!Y)c="";else{c=[];c.push(Y.type);c.push(Y.redirectCount);c.push(U);for(e=0;e<ga.length;e++)c.push(wa(ga[e]));c=c.join("/")}c=";nt="+c}else c="";c=b+c+("device"in a?";device="+escape(a.device):"")+";ni=";if(!navigator||!navigator.connection)b="";else{b=navigator.connection;e=[];for(f=0;f<ha.length;f++){d=b[ha[f]];if(void 0!==d)switch(d){case !0:d=1;break;case !1:d=0;break;default:d=(""+d).replace(/\//g,"_")}e.push(d)}b=e.join("/")}c+=b;var s;if("params"in a){b=escape;if(a=a.params)if(e=typeof a,"number"===
e||"boolean"===e||"string"===e||a.nodeType||a===a.window)s="";else{d=[];for(s in a)if(a.hasOwnProperty(s)){f=a[s];e=typeof f;if("string"===e)f='"'+f.replace(/[\"\']/g,"\\$&")+'"';else if(!("number"===e||"boolean"===e))continue;d.push('"'+s+'":'+f)}s=!d.length?"":"{"+d.join(",")+"}"}else s="";s=";params="+b(s)}else s="";return c+s+(null!==h?";detect="+h:"")+(F||S?";lvid="+escape([K,r(),z,C].join(":")):"")+(l?";opts="+escape(l):"")+";_="+Math.random()}function ia(a){a=";e="+escape("PVT/"+a);for(var b=
0;b<m.length;b++)p(q(m[b],!0,!1,!0)+a)}function Aa(){W=!0;ja(1);if(!ka&&!D){D=!0;for(var a=0;a<m.length;a++)ba(m[a])}}function Ba(){ja(0);W=!1}function xa(){var a=R(la);if(null===a)return null;a=a.split("|");if(2!==a.length)return null;var b=a[1],b=r()-b;if(0>b||b>ma)return null;a=parseInt(a[0],10);return isNaN(a)?null:a}function ja(a){var b=r();a=[a,b].join("|");E(la,a,{path:"/",expires:ma})}function L(){document.addEventListener?(B(document,"DOMContentLoaded",L),_tmr.onready()):document.attachEvent&&
"complete"===document.readyState&&(B(document,"readystatechange",L),_tmr.onready())}function na(){B(window,"load",na);_tmr.onready();_tmr.onload()}function M(){B(window,"unload",M);B(window,"beforeunload",M);_tmr.unload()}if("[object Array]"===Object.prototype.toString.call(_tmr)){var k=window,l=navigator,aa=document,F=!(0===location.hostname.search(/^(\d+.)+\d+$/g)||-1!==location.hostname.search(/:/g)),y=null,S=ta(),va={domain:ua(),path:"/",expires:287712E5},D=!1,W=null,ma=864E5,la="tmr_detect",
Ca=function(){function a(a,c){var e=document.createElement("div");e.setAttribute("class",String.fromCharCode(97,100,118,98,108,111,99,107,32,97,100,118,101,114,116,98,108,111,99,107,32,97,109,109,98,108,111,99,107,32,98,45,98,97,110,110,101,114,32,98,45,109,101,100,105,97,45,98,97,110,110,101,114,32,112,117,98,95,51,48,48,120,50,53,48,32,112,117,98,95,51,48,48,120,50,53,48,109,32,109,101,100,105,117,109,95,114,101,99,116,97,110,103,108,101,95,51,48,48,95,50,53,48,32,112,117,98,95,55,50,56,120,57,
48,32,108,101,97,100,101,114,98,111,97,114,100,95,55,50,56,95,57,48,32,119,105,100,101,95,115,107,121,115,99,114,97,112,101,114,95,49,54,48,95,54,48,48,32,119,105,100,101,95,115,107,121,115,99,114,97,112,101,114,95,49,54,48,120,54,48,48,32,116,101,120,116,45,97,100,32,116,101,120,116,65,100,32,116,101,120,116,95,97,100,32,116,101,120,116,95,97,100,115,32,116,101,120,116,45,97,100,115,32,116,101,120,116,45,97,100,45,108,105,110,107,115,32,97,100,95,116,101,120,116,32,97,100,95,116,101,120,116,32,98,
97,110,110,101,114,95,116,101,120,116,32,116,101,120,116,45,98,97,110,110,101,114,32,98,45,114,98,32,114,98,45,115,108,111,116,32,98,45,112,114,111,109,111,45,97,100,32,105,45,98,114,97,110,100,105,110,103,32,98,114,97,110,100,105,110,103,45,112,32,114,98,45,118,105,100,101,111,45,119,105,100,103,101,116,32,98,45,109,105,109,105,99,45,97,100,118,32,112,109,45,116,111,111,108,98,97,114,95,95,98,97,110,110,101,114,32,114,98,95,98,111,100,121,32,115,116,105,99,107,121,45,115,112,114,105,110,103,115,
32,97,100,118,95,115,108,111,116,95,49,32,98,97,110,110,101,114,95,50,52,48,32,98,108,111,99,107,95,115,104,97,114,101,32,97,99,116,105,111,110,45,45,115,104,97,114,101,32,115,104,97,114,101,108,105,115,116,32,106,115,45,98,97,110,110,101,114,32,100,105,114,101,99,116,32,112,99,45,109,105,109,105,99,32,116,103,98,45,98,97,110,110,101,114,32,121,97,100,105,114,101,99,116,32,106,115,45,112,114,111,109,111,45,112,111,112,117,112,32,109,45,115,117,98,115,99,114,105,112,116,105,111,110,32,112,45,116,97,
114,103,101,116,32,112,45,100,105,114,101,99,116,104,97,99,107,32,114,98,45,102,108,111,97,116,105,110,103,32,116,114,103,45,98,45,98,97,110,110,101,114,45,98,108,111,99,107));e.setAttribute("style","position: absolute !important; top: -9999px !important; left: -9999px !important; width: 1px !important; height: 1px !important;");e.setAttribute("id","trg-b-banners-1");e.setAttribute("data-view","SlotView.mimic");this.bait=document.body.appendChild(e);this.bait.offsetParent;this.bait.offsetHeight;this.bait.offsetLeft;
this.bait.offsetTop;this.bait.offsetWidth;this.bait.clientHeight;this.bait.clientWidth;this.loopNumber=0;this.fnPositive=a||null;this.fnNegative=c||null;var d=this;setTimeout(function(){d._checkBait.call(d)},1)}a.prototype._checkBait=function(){if(D)this._stop();else{var a=!1;null!==document.body.getAttribute("abp")||null===this.bait.offsetParent||0==this.bait.offsetHeight||0==this.bait.offsetLeft||0==this.bait.offsetTop||0==this.bait.offsetWidth||0==this.bait.clientHeight||0==this.bait.clientWidth?
a=!0:void 0!==window.getComputedStyle&&(a=window.getComputedStyle(this.bait,null),a="none"==a.getPropertyValue("display")||"hidden"==a.getPropertyValue("visibility"));(!0===a||10<=++this.loopNumber)&&this._stop();var c;if(a&&this.fnPositive)try{c=this.fnPositive,c()}catch(e){}else if(!a&&10>this.loopNumber){var d=this;setTimeout(function(){d._checkBait.call(d)},50*this.loopNumber)}else try{c=this.fnNegative,c()}catch(f){}}};a.prototype._stop=function(){try{document.body.removeChild(this.bait)}catch(a){}};
return function(b,c){new a(b,c)}}(),fa="60.1.0",Z=0,N=0,ea=$(16),u=null,O=0,V="tmr_reqNum",z=T(V),z=null===z?0:parseInt(z,10);G(V,z);var C=T("tmr_lvid"),K=T("tmr_lvidTS");null===C&&(C=$(32));G("tmr_lvid",C);null===K&&(K=""+r());G("tmr_lvidTS",K);var v=0,m=[],P=[],Q=[],n="string"===typeof location.hostname&&(-1!=location.hostname.search(/(^|\.)odnoklassniki\.ru$/)||-1!=location.hostname.search(/(^|\.)ok\.ru$/)),t="string"===typeof location.hostname&&-1!=location.hostname.search(/(^|\.)vk\.com$/),Da=
"string"===typeof location.hostname&&-1!=location.hostname.search(/(^|\.)lamoda\.ru$/),Ea="string"===typeof location.hostname&&-1!=location.hostname.search(/(^|\.)kommersant\.ru$/),Fa="string"===typeof location.search&&-1!=location.search.search(/[?&]rb_clickid=/),h="string"===typeof location.search&&-1!=location.search.search(/[?&]tmr_debug=1(?:&|$)/),oa=n||t||Da||Ea,Ga=!Fa,Ha=n||t,Ia=n||t,pa=n||t,ka=!1,ya="ontouchstart"in k||1<(l.maxTouchPoints||l.msMaxTouchPoints)?"1":"0",za=window.devicePixelRatio||
0,X="";if(l.plugins&&l.plugins["Shockwave Flash"])X=l.plugins["Shockwave Flash"].description.split(" ")[2];else if(window.ActiveXObject)try{var A=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),A=A.GetVariable("$version"),A=A.split(" ")[1].split(","),X=A[0]+"."+A[1]}catch(Ja){}var k=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance||{},w=k.timing||{},Y=k.navigation||{},ga="unloadEventStart unloadEventEnd redirectStart redirectEnd fetchStart domainLookupStart domainLookupEnd connectStart connectEnd secureConnectionStart requestStart responseStart responseEnd domLoading domInteractive domContentLoadedEventStart domContentLoadedEventEnd domComplete loadEventStart loadEventEnd".split(" "),
U=!w?void 0:w.navigationStart,ha="downlink downlinkMax effectiveType rtt saveData type".split(" ");g.prototype.pageView=function(a){H(a);var b;if(b=a&&"object"===typeof a)if(b="id"in a)if(b=5>P.length){b:{for(b=0;b<P.length;b++)if(P[b]===a.id){b=!0;break b}b=!1}b=!b}b&&(P.push(a.id),!1!==a.beat&&Q.push(a.id),m.push(a),D&&ba(a));if(b=I("pageView",a,{title:"Page view",id:!0,optional:{url:location.href}}))p(q(a,!1,!1,!0)),N=r(),h&&J(b)};g.prototype.reachGoal=function(a){H(a);var b=I("reachGoal",a,{title:"Reach goal",
id:v,value:!0,required:{goal:!0},optional:null,fn:null});if(b&&"goal"in a&&a.goal){var c="";"value"in a&&a.value&&(c=parseInt(a.value)||"");p(q(a,!0,!1,!0)+(";e="+escape("RG:"+c+"/"+a.goal)));h&&J(b)}};g.prototype.itemView=function(a){var b=I("itemView",a,{title:"Item view",id:v,optional:{list:!0,productid:!0,pagetype:!0,totalvalue:!0},fn:function(a,b){return(""+b).replace(/;/g," ")}});if(b){var c=a.list||"",e=a.productid||"",d=a.pagetype||"",f=a.totalvalue||0;(new Image).src="https://ad.mail.ru/retarget/?counter="+
b.id+"&list="+c+"&productid="+e+"&pagetype="+d+"&totalvalue="+f+"&_="+Math.random();c="IV:"+f+"/"+(""+c).replace(/;/g," ")+";"+(""+e).replace(/;/g," ")+";"+(""+d).replace(/;/g," ");p(q(a,!0,!1,!1)+(";e="+escape(c)));h&&J(b)}};g.prototype.sendEvent=function(a){H(a);var b=I("sendEvent",a,{title:"Send event",id:v,value:!0,required:{category:!0,action:!0},optional:{label:!0},fn:function(a,b){return(""+b).substr(0,300).replace(/;/g," ")}});if(b&&"category"in a&&a.category&&"action"in a&&a.action){var c=
(""+a.category).substr(0,300),e=(""+a.action).substr(0,300),d="";"label"in a&&a.label&&(d=(""+a.label).substr(0,300));var f="";"value"in a&&a.value&&(f=parseInt(a.value)||"");c="CE:"+f+"/"+(""+c).replace(/;/g," ")+";"+(""+e).replace(/;/g," ")+";"+(""+d).replace(/;/g," ");p(q(a,!0,!1,!1)+(";e="+escape(c)));h&&J(b)}};g.prototype.setUserID=function(a){if(null===a||!1===a||void 0===a)this.deleteUserID();else{var b=typeof a;"number"!==b&&"string"!==b?h&&console.warn("[TopMailRu]: Invalid user ID in setUserID"):
(u=a,h&&console.info("[TopMailRu]: Global user ID = "+u))}};g.prototype.getUserID=function(){return u||0===u?u:void 0};g.prototype.deleteUserID=function(){u=null;h&&console.info("[TopMailRu]: Reset global user ID to null")};g.prototype.getClientID=function(){var a=C;return a||0===a?a:void 0};g.prototype.processEvent=function(a){if(a&&"object"===typeof a)if("type"in a)switch(a.type){case "pageView":this.pageView(a);break;case "reachGoal":this.reachGoal(a);break;case "itemView":this.itemView(a);break;
case "sendEvent":this.sendEvent(a);break;case "setUserID":"userid"in a&&this.setUserID(a.userid);break;case "deleteUserID":this.deleteUserID()}else h&&console.warn("[TopMailRu]: Unspecified push event type");else h&&console.warn("[TopMailRu]: Invalid push event")};g.prototype.push=function(a){for(var b=0,c=arguments.length;b<c;b++)this.processEvent(arguments[b])};var qa=!1;g.prototype.onready=function(){qa||(qa=!0,!ka&&!D&&Ca(Aa,Ba))};var ra=!1;g.prototype.onload=function(){if(!ra){ra=!0;O=r();if(!Ia&&
0<m.length){for(var a=";e="+escape("RT/load")+";et="+O,b=0;b<m.length;b++)p(q(m[b],!0,!0,!1)+a);N=O}Ga||setTimeout(function(){ia(2)},2E3);Ha||setTimeout(function(){ia(15)},15E3)}};g.prototype.beat=function(){if(!oa&&Z){var a=r();if(!(12E4<a-Z)){if(12E4<a-N)for(var b=";e="+escape("RT/resend")+";et="+O,c=0;c<m.length;c++)!1!==m[c].beat&&p(q(m[c],!0,!1,!0)+b);else 0<Q.length&&p("/tracker?js=13;id="+Q[0]+";e="+escape("RT/beat")+";sid="+ea+";ids="+Q.join()+";ver="+fa+";_="+Math.random());N=a}}};var sa=
!1;g.prototype.unload=function(){if(!sa&&(sa=!0,!pa)){var a;a=(a=ca())?r()-a:void 0;a=";e="+escape("RT/unload")+";et="+r()+(a?";pvt="+escape(a):"");for(var b=0;b<m.length;b++)p(q(m[b],!0,!1,!1)+a)}};g.prototype.activity=function(a){Z=r()};l=new g;k=0;for(n=_tmr.length;k<n;k++)(t=_tmr[k])&&"object"===typeof t&&H(t);k=0;for(n=_tmr.length;k<n;k++)t=_tmr[k],l.processEvent(t);_tmr=l;if("complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll)_tmr.onready();
else document.addEventListener?x(document,"DOMContentLoaded",L):document.attachEvent&&x(document,"readystatechange",L);if("complete"===document.readyState)_tmr.onload();else x(window,"load",na);pa||(x(window,"unload",M),x(window,"beforeunload",M));if(!oa){setInterval(function(){_tmr.beat()},6E4);try{l="scroll gesturechange touchmove mousedown mousemove mouseup touch".split(" ");n=function(a){x(document,a,function(){_tmr.activity(a)})};for(k=0;k<l.length;k++)n(l[k]);x(window,"scroll",function(){_tmr.activity("scallback")})}catch(Ka){}}}})();
